<html>
  <head>
    <script src="./node_modules/d3/build/d3.min.js"></script>
    <script src="./node_modules/d3-flame-graph/dist/d3-flamegraph.min.js"></script>
    <script src="./node_modules/d3-flame-graph/dist/d3-flamegraph-colorMapper.min.js"></script>
    <link rel="stylesheet" type="text/css" href="./node_modules/d3-flame-graph/dist/d3-flamegraph.css"></link>
</head>
<body>
  <div id="linechart"></div>
  <br/>
  <div>Value: <span id="linemessage"></span></div>

  <script type="text/javascript">
    /*
    var colors = d3.ez.palette.categorical(3);
    var chart = d3.ez.chart.lineChart()
        .colors(colors)
        .yAxisLabel("Rate");
    var legend = d3.ez.component.legend().title("Currency");
    var title = d3.ez.component.title().mainText("Historical Exchange Rates").subText("Comparison against GBP");

    function nnow(offset) {
        return new Date(new Date().getTime() + (offset * 24 * 60 * 60 * 1000));
    }

    // Convert csv to d3-ez data format
    var data = [ {key: "USD", values: []}, {key: "EUR", values: []}, {key: "AUD", values: []} ];
    data[0].values.push({ key: nnow(-5), value: 5 });
    data[0].values.push({ key: nnow(-4), value: 10 });
    data[0].values.push({ key: nnow(-3), value: 7 });
    data[0].values.push({ key: nnow(-2), value: 3 });

    data[1].values.push({ key: nnow(-5), value: 50 });
    data[1].values.push({ key: nnow(-4), value: 20 });
    data[1].values.push({ key: nnow(-3), value: 30 });
    data[1].values.push({ key: nnow(-2), value: 30 });

    data[2].values.push({ key: nnow(-5), value: 500 });
    data[2].values.push({ key: nnow(-4), value: 100 });
    data[2].values.push({ key: nnow(-3), value: 30 });
    data[2].values.push({ key: nnow(-2), value: 70 });

    // Create chart base
    var myChart = d3.ez.base()
        .width(750)
        .height(400)
        .chart(chart)
        .legend(legend)
        .title(title)
        .on("customValueMouseOver", function(d, i) {
            d3.select("#message").text(d.value);
        });

    d3.select('#chartholder')
    .datum(data)
    .call(myChart);
    */
  </script>

  <div class="container">
    <div class="header clearfix">
      <nav>
        <div class="pull-right">
          <form class="form-inline" id="form">
            <a class="btn" href="javascript: resetZoom();">Reset zoom</a>
            <a class="btn" href="javascript: clear();">Clear</a>
            <div class="form-group">
              <input type="text" class="form-control" id="term">
            </div>
            <a class="btn btn-primary" href="javascript: search();">Search</a>
          </form>
        </div>
      </nav>
      <h3 class="text-muted">d3-flame-graph</h3>
    </div>
    <div id="flamechart">
    </div>
    <hr>
    <div id="flamedetails">
    </div>
  </div>

  <script type="text/javascript">
    /*
    var flameGraph = flamegraph()
        .width(960)
        .cellHeight(18)
        .transitionDuration(750)
        .minFrameSize(5)
        .transitionEase(d3.easeCubic)
        .sort(true)
    //Example to sort in reverse order
    //.sort(function(a,b){ return d3.descending(a.name, b.name);})
    .title("")
    .onClick(onClick)
    .selfValue(false);
    */

    // Example on how to use custom tooltips using d3-tip.
    // var tip = d3.tip()
    //   .direction("s")
    //   .offset([8, 0])
    //   .attr('class', 'd3-flame-graph-tip')
    //   .html(function(d) { return "name: " + d.data.name + ", value: " + d.data.value; });

    // flameGraph.tooltip(tip);

    /*
    var details = document.getElementById("details");
    flameGraph.setDetailsElement(details);
    */

    // Example on how to use custom labels
    // var label = function(d) {
    //  return "name: " + d.name + ", value: " + d.value;
    // }
    // flameGraph.label(label);

    // Example of how to set fixed chart height
    // flameGraph.height(540);

    /*
    d3.json("stacks.json", function(error, data) {
        if (error) return console.warn(error);
        d3.select("#chart")
            .datum(data)
            .call(flameGraph);
    });

    document.getElementById("form").addEventListener("submit", function(event){
        event.preventDefault();
        search();
    });

    function search() {
        var term = document.getElementById("term").value;
        flameGraph.search(term);
    }

    function clear() {
        document.getElementById('term').value = '';
        flameGraph.clear();
    }

    function resetZoom() {
        flameGraph.resetZoom();
    }

    function onClick(d) {
        console.info("Clicked on " + d.data.name);
    }
    */
  </script>
  <script type="module" src="./index-bundle.js"></script>

</body>
</html>
